---
description:
globs:
alwaysApply: false
---
# 项目名称
MDRepaintClothing

# 项目目标
本项目旨在为用户提供一个本地可用的服装图片重绘与生成平台，支持服装图片上传、自动抠图、服装细节描述、多模型文生图生成、图片对比与历史追溯，便于服装设计、分析与创新。

# 操作流程
1. 用户上传服装图片（支持 jpg、png、webp，无大小限制）。
2. 系统可选自动扣除背景（图像分割，支持多模型，后端切换）。
3. 系统调用多模态模型，自动生成服装细节描述（支持中英文，支持多模型，后端切换）。
4. 系统调用文生图大模型，根据描述生成新服装图片（支持多模型，参数可调，后端切换）。
5. 前端支持图片对比（原图、分割图、描述生成图，比例一致）、历史记录、模型选择、参数调整、图片下载。
6. 所有操作均有详细日志记录，支持追溯和还原。

# 技术架构
- 前端：React + TailwindCSS
- 后端：Python + FastAPI
- 支持本地 GPU 推理（Nvidia 5070ti/4090）和外部 API 调用
- 日志分级（info、warning、error），存储于 logs/ 目录，带时间戳

# 模型管理
- 图像分割、图像描述、文生图均支持多模型
- 后端通过配置文件切换模型（建议使用 yaml/json）
- 新模型需独立接口和代码文件，互不影响，可独立服务

# 参数调整
- 前端根据不同模型动态展示可调参数
- 所有参数均有详细说明，帮助用户理解影响和后果

# 历史记录与追溯
- 每次生图操作均记录：原图、分割图、描述生成图、服装描述内容、模型选择、参数、运算时间
- 可还原三图对比页面

# 日志与报错
- logs/ 目录，分级（info、warning、error），带时间戳
- 不允许模拟或伪造数据，所有报错需原样记录并写入日志

# 文件结构建议
- 前端：/frontend
- 后端：/backend
- 日志：/logs
- 配置：/config
- 历史记录：/history
- 文档：/docs

# 变更与维护
- 所有开发内容需分步骤写入 TODO.md，开发完毕需更新状态
- 技术选型与变更需同步更新 tech_selection.md
